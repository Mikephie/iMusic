/* style.css - 完整修改版 (间隔压缩 + 配色优化) */

/* ===== Reset & Base ===== */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html, body { margin: 0; padding: 0; }
body {
  font-family: -apple-system,BlinkMacSystemFont,"SF Pro Display","Segoe UI",Roboto,Arial,sans-serif;
  background: var(--bg);
  color: var(--fg);
  min-height: 100vh;
  transition: background .2s ease, color .2s ease;
}

:root{
  /* --- 配色优化 --- */
  --bg:#0A0B0E; /* 更深的背景，增加对比度 */
  --fg:#f2f4f8; /* 文本更亮 */
  --muted:#99A0AD; /* 柔和的灰色 */
  --card:#14161B; /* 卡片背景略亮于主背景 */
  --border:#272A30; /* 更清晰的边框/分隔线 */
  --shadow:0 3px 8px rgba(0,0,0,.3); /* 调整阴影深度 */
  --primary:#747fff; /* 柔和且科技感的主色 (Primary) */
  --primary-rgb: 116, 127, 255;
  --accent:#3bb4ff; /* 略微调整的强调色 (Accent) */
  --danger:#ff6b6b;
  --success:#48d197;
  --radius:12px; /* 统一圆角 */
}
@media (prefers-color-scheme: light){
  :root{
    --bg:#f8f9fb; --fg:#141518; --muted:#6b7280;
    --card:#ffffff; --border:#e6e8ee; --shadow:0 1px 3px rgba(0,0,0,.08);
    --primary:#3f51b5; --primary-rgb: 63, 81, 181;
    --accent:#1976d2; --danger:#dc3545; --success:#28a745;
  }
}

.hidden { display:none !important; }

/* ===== Heading (间隔压缩) ===== */
h1{
  text-align:center;
  margin: 14px 0 12px; /* 顶部间隔压缩 */
  font-size: clamp(1.4rem, 1.1rem + 1vw, 2.2rem);
  font-weight: 800;
}

/* ===== Single-column container (间隔压缩) ===== */
.container{
  width: min(900px, 92vw);
  margin: 0 auto 30px; /* 底部间隔压缩 */
  display: grid;
  gap: 14px; /* 卡片间距压缩 */
}

/* ===== Card (Optimization) ===== */
.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: 0 4px 10px rgba(0,0,0,.15), var(--shadow);
  padding: 16px; /* 内部填充压缩 */
}

/* ===== Form (间隔压缩) ===== */
label{
  display:block; margin:8px 0 5px; /* 标签间隔压缩 */
  font-weight:600; color:var(--fg);
  font-size:.95rem;
}
input[type="file"], input[type="text"]{
  width:100%; padding:10px 14px; border-radius:10px; /* 输入框高度略微压缩，圆角略减 */
  border:1px solid var(--border); 
  background:rgba(255,255,255,0.04); 
  color:var(--fg);
  font-size:1rem; outline:none; transition: border-color .15s, background .15s;
}
input[type="file"]:focus, input[type="text"]:focus{
  border-color: var(--primary); 
  background: rgba(var(--primary-rgb),.1); 
}

button{
  padding:11px 16px; border:none; border-radius:10px; /* 按钮高度略微压缩，圆角略减 */
  font-weight:700;
  cursor:pointer; transition: transform .1s ease, filter .15s ease, background .15s;
}
button:active{ transform: scale(.98); }
button:disabled{ opacity:.6; cursor:not-allowed; }
.btn-primary{ 
  background: var(--primary); 
  color:#fff; 
  width:100%; 
  box-shadow: 0 3px 8px rgba(var(--primary-rgb),.3); /* 阴影压缩 */
  margin-top: 12px; /* 按钮与上方输入框的间距压缩 */
}
.btn-primary:hover { filter: brightness(1.1); }
.btn-accent{  background: var(--accent);  color:#fff; width:100%; margin-top: 16px; /* 按钮间距压缩 */ }
.btn-success{ background: var(--success); color:#fff; border-radius:999px; padding:7px 10px; }
.btn-secondary{
  display:block; width:100%;
  padding:11px 16px; border-radius:10px;
  background:#474d5a; /* 次要按钮颜色调整 */
  color:#fff; font-weight:700; text-align:center;
}

/* ===== Preview & Metadata Layout (间隔压缩 + 布局调整) ===== */
.cover-metadata-flex-wrapper {
  display: flex;
  gap: 15px; /* 间距压缩 */
  align-items: flex-start;
  margin-top: 12px; /* 与上一个输入框的间距压缩 */
}

.preview-box {
  flex-shrink: 0;
}

.metadata-fields {
  flex-grow: 1; 
}

.metadata-header {
  font-weight: bold;
  margin-bottom: 8px; /* 标题间隔压缩 */
  border-bottom: 1px dashed var(--border);
  padding-bottom: 4px;
  color: var(--muted);
  font-size: .95rem;
}

.preview-title{ 
  font-size:.9rem; 
  color:var(--muted); 
  margin:0 0 6px; /* 标题间隔压缩 */
  font-weight: 600; 
}
.preview-img{
  width:120px; /* 移动端/默认尺寸压缩 */
  height:120px; 
  border-radius:10px; 
  object-fit:cover;
  border: 1px solid var(--border);
  box-shadow: 0 4px 10px rgba(0,0,0,0.25);
  display:block; 
  cursor:zoom-in;
}

/* 移动端适配：取消封面与元数据的并排布局 */
@media (max-width: 600px) {
  .cover-metadata-flex-wrapper {
    flex-direction: column;
    gap: 12px; /* 移动端堆叠后的间距压缩 */
  }
  .preview-box {
    align-self: center; 
  }
  .preview-img{
    width:140px; /* 移动端堆叠后可以适当放大一点 */
    height:140px; 
  }
}


/* ===== Output blocks (间隔压缩 + 配色调整) ===== */
.feedback-block {
  padding: 10px 14px; /* 填充压缩 */
  border-radius: 10px;
  font-size: .95rem; /* 字体略微缩小 */
  margin-top: 0px; 
  display: flex;
  align-items: center;
  gap: 10px;
  white-space: pre-wrap; 
  word-break: break-word;
}

.feedback-success {
  background: rgba(72, 209, 151, 0.15); /* 使用新配色成功色 */
  color: var(--success);
  font-weight: 600;
}

.feedback-error {
  background: rgba(255, 107, 107, 0.15); /* 使用新配色失败色 */
  color: var(--danger);
  font-weight: 600;
}

/* 原有的linkOutput和message保留 */
#linkOutput{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; padding: 10px 14px; /* 间距压缩 */ }
#musicLink{ color: var(--accent); text-decoration: none; word-break: break-all; font-size: .95rem; }


/* ===== File list (间隔压缩) ===== */
#assetListDisplay{ padding: 0; overflow:hidden; }
.asset-header{
  padding:8px 14px; border-bottom:1px solid var(--border); color:var(--muted); font-size:.9rem; /* 头部压缩 */
}
.asset-item{
  display:grid;
  grid-template-columns: 56px 1fr auto; /* 封面略小 */
  align-items:center;
  gap:12px; /* 间距压缩 */
  padding:10px 14px; /* 内部填充压缩 */
  border-bottom:1px solid var(--border);
}
.asset-item:last-child{ border-bottom:none; }
.asset-cover{
  width:56px; 
  height:56px; 
  border-radius:8px; /* 圆角压缩 */
  object-fit:cover; cursor:zoom-in;
  border: 1px solid var(--border);
}
.asset-info{ min-width:0; }
.asset-title{
  font-weight:700; color:var(--fg); font-size:.95rem; 
}
.asset-type-label{ color:var(--muted); font-size:.82rem; margin-top:2px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

.asset-actions{ display:flex; gap:6px; align-items:center; flex-wrap:wrap; }
.asset-actions .btn{ padding:6px 10px; border-radius:999px; color:#fff; font-weight:700; font-size: .85rem; }
.asset-actions .play-btn{ background: var(--accent); color:#fff; }
.asset-actions .copy-btn{ background: var(--success); color:#fff; }
.asset-actions .cover-btn{ background: #8e62ff; color:#fff; }
.asset-actions .del-btn{ background: var(--danger); color:#fff; }

@media (max-width: 520px){
  .asset-item{ grid-template-columns: 50px 1fr; gap: 10px; }
  .asset-actions{ grid-column: 1 / -1; justify-content:flex-end; margin-top: 4px; }
  .asset-cover{ width:50px; height:50px; }
}

/* ===== Lightbox ===== */
.lightbox{
  position:fixed; inset:0; background:rgba(0,0,0,.85);
  display:flex; align-items:center; justify-content:center;
  opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:9999;
}
.lightbox.show{ opacity:1; pointer-events:auto; }
.lightbox img{ max-width:92vw; max-height:92vh; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,0.4); }
