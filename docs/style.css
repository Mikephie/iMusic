/* style.css - 完整修改版 */

/* ===== Reset & Base ===== */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html, body { margin: 0; padding: 0; }
body {
  font-family: -apple-system,BlinkMacSystemFont,"SF Pro Display","Segoe UI",Roboto,Arial,sans-serif;
  background: var(--bg);
  color: var(--fg);
  min-height: 100vh;
  transition: background .2s ease, color .2s ease;
}

:root{
  --bg:#111315;
  --fg:#e9eaee;
  --muted:#a3a7ad;
  --card:#1a1c1f;
  --border:#2a2d33;
  --shadow:0 1px 3px rgba(0,0,0,.15); 
  --primary:#5d7cff;
  --primary-rgb: 93, 124, 255; /* 新增：用于rgba颜色计算 */
  --accent:#3aa3ff;
  --danger:#ef5350;
  --success:#2ecc71;
  --radius:14px; /* 增大圆角 */
}
@media (prefers-color-scheme: light){
  :root{
    --bg:#f5f6f8; --fg:#141518; --muted:#6b7280;
    --card:#ffffff; --border:#e6e8ee; --shadow:0 1px 3px rgba(0,0,0,.08);
    --primary:#3f51b5; --primary-rgb: 63, 81, 181;
    --accent:#1976d2; --danger:#dc3545; --success:#28a745;
  }
}

.hidden { display:none !important; }

/* ===== Heading (Slight adjustment) ===== */
h1{
  text-align:center;
  margin: 16px 0 16px; /* 减少顶部margin，增加底部margin */
  font-size: clamp(1.4rem, 1.1rem + 1vw, 2.2rem);
  font-weight: 800;
}

/* ===== Single-column container (clean desktop) (Slight adjustment) ===== */
.container{
  width: min(900px, 92vw);
  margin: 0 auto 40px; /* 增加底部留白 */
  display: grid;
  gap: 18px; /* 增加卡片间距 */
}

/* ===== Card (Optimization) ===== */
.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  /* 增加更明显的阴影，提升立体感 */
  box-shadow: 0 4px 12px rgba(0,0,0,.15), var(--shadow);
  padding: 20px; /* 增加内边距 */
}

/* ===== Form (Optimization) ===== */
label{
  display:block; margin:10px 0 6px; font-weight:600; color:var(--fg);
  font-size:.95rem;
}
input[type="file"], input[type="text"]{
  width:100%; padding:12px 14px; border-radius:12px; /* 统一圆角 */
  border:1px solid var(--border); 
  background:rgba(255,255,255,0.03); /* 增加微弱的背景色区分 */
  color:var(--fg);
  font-size:1rem; outline:none; transition: border-color .15s, background .15s;
}
input[type="file"]:focus, input[type="text"]:focus{
  border-color: var(--primary); /* 聚焦时使用主色 */
  background: rgba(var(--primary-rgb),.1); /* 聚焦时浅色背景 */
}

button{
  padding:12px 16px; border:none; border-radius:12px; /* 统一圆角 */
  font-weight:700;
  cursor:pointer; transition: transform .1s ease, filter .15s ease, background .15s;
}
button:active{ transform: scale(.98); }
button:disabled{ opacity:.6; cursor:not-allowed; }
.btn-primary{ 
  background: var(--primary); 
  color:#fff; 
  width:100%; 
  /* 增加立体阴影 */
  box-shadow: 0 4px 10px rgba(var(--primary-rgb),.4); 
}
.btn-primary:hover { filter: brightness(1.1); }
.btn-accent{  background: var(--accent);  color:#fff; width:100%; }
.btn-success{ background: var(--success); color:#fff; border-radius:999px; padding:8px 12px; }
.btn-secondary{
  display:block; width:100%;
  padding:12px 16px; border-radius:12px; /* 统一圆角 */
  background:#6b7280; color:#fff; font-weight:700; text-align:center;
}

/* ===== Preview & Metadata Layout (New/Optimization) ===== */
.cover-metadata-flex-wrapper {
  display: flex;
  gap: 20px; /* 封面和元数据之间的间距 */
  align-items: flex-start;
  margin-top: 15px; /* 与上一个输入框的间距 */
}

.preview-box {
  flex-shrink: 0; /* 封面区域不被压缩 */
}

.metadata-fields {
  flex-grow: 1; /* 元数据区域占据剩余空间 */
}

.metadata-header {
  font-weight: bold;
  margin-bottom: 10px;
  border-bottom: 1px dashed var(--border); /* 虚线分隔，更轻量 */
  padding-bottom: 5px;
  color: var(--muted);
  font-size: .95rem;
}

.preview-title{ 
  font-size:.9rem; 
  color:var(--muted); 
  margin:0 0 8px; 
  font-weight: 600; 
}
.preview-img{
  width:140px; /* 略微增大尺寸 */
  height:140px; 
  border-radius:12px; 
  object-fit:cover;
  border: 1px solid var(--border); /* 增加边框 */
  box-shadow: 0 6px 15px rgba(0,0,0,0.25); /* 调整阴影 */
  display:block; 
  cursor:zoom-in;
}

/* 移动端适配：取消封面与元数据的并排布局 */
@media (max-width: 600px) {
  .cover-metadata-flex-wrapper {
    flex-direction: column;
    gap: 15px;
  }
  .preview-box {
    align-self: center; /* 封面居中 */
  }
}


/* ===== Output blocks (New/Optimized) ===== */
/* 为搜索结果和加载信息创建统一的反馈样式 */
.feedback-block {
  padding: 12px 16px;
  border-radius: 12px;
  font-size: 1rem;
  margin-top: 0px; /* 确保它紧贴着上一个元素（这里是 pre 标签） */
  display: flex;
  align-items: center;
  gap: 10px;
  white-space: pre-wrap; /* 继承 pre 标签的换行属性 */
  word-break: break-word;
}

/* 成功样式 */
.feedback-success {
  background: rgba(46, 204, 113, 0.12);
  color: var(--success);
  font-weight: 600;
}

/* 失败/错误样式 */
.feedback-error {
  background: rgba(239, 83, 80, 0.12);
  color: var(--danger);
  font-weight: 600;
}

/* 原有的linkOutput和message保留 */
#linkOutput{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; }
#musicLink{ color: var(--accent); text-decoration: none; word-break: break-all; }
/* #message 的样式被 .feedback-block 接管 */


/* ===== File list (Slight adjustment) ===== */
#assetListDisplay{ padding: 0; overflow:hidden; }
.asset-header{
  padding:10px 14px; border-bottom:1px solid var(--border); color:var(--muted); font-size:.92rem;
}
.asset-item{
  display:grid;
  grid-template-columns: 60px 1fr auto; /* 封面略大 */
  align-items:center;
  gap:16px; /* 增加间距 */
  padding:12px 14px; /* 增加内边距 */
  border-bottom:1px solid var(--border);
}
.asset-item:last-child{ border-bottom:none; }
.asset-cover{
  width:60px; /* 略微增大 */
  height:60px; 
  border-radius:10px; object-fit:cover; cursor:zoom-in;
  border: 1px solid var(--border);
}
.asset-info{ min-width:0; }
.asset-title{
  font-weight:700; color:var(--fg); font-size:.98rem; /* 字体略大 */
  overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
}
.asset-type-label{ color:var(--muted); font-size:.85rem; margin-top:2px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

.asset-actions{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.asset-actions .btn{ padding:8px 12px; border-radius:999px; color:#fff; font-weight:700; }
.asset-actions .play-btn{ background: var(--accent); color:#fff; }
.asset-actions .copy-btn{ background: var(--success); color:#fff; }
.asset-actions .cover-btn{ background: #8e62ff; color:#fff; }
.asset-actions .del-btn{ background: var(--danger); color:#fff; }

@media (max-width: 520px){
  .asset-item{ grid-template-columns: 50px 1fr; gap: 12px; }
  .asset-actions{ grid-column: 1 / -1; justify-content:flex-end; margin-top: 6px; }
  .asset-cover{ width:50px; height:50px; }
}

/* ===== Lightbox ===== */
.lightbox{
  position:fixed; inset:0; background:rgba(0,0,0,.85);
  display:flex; align-items:center; justify-content:center;
  opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:9999;
}
.lightbox.show{ opacity:1; pointer-events:auto; }
.lightbox img{ max-width:92vw; max-height:92vh; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.4); }
